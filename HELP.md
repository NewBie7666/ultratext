# UltraText 帮助文档（M1–M7.6）

本帮助文档汇总了当前项目的主要功能与快捷键，涵盖文件操作、编辑与格式化、查找/替换、表格与链接媒体、数学公式、主题与外观等。内容基于代码实现与内置菜单快捷键，便于上手与查阅。

## 概览
- 支持三种文件格式：`JSON`、`Markdown (MD)`、`Text (TXT)`。
- 富文本编辑器：加粗、斜体、下划线、删除线、标题、列表、引用、代码块。
- 颜色与字体：文字颜色、高亮背景、字体族选择。
- 媒体与链接：图片（本地/URL/拖拽）、视频（YouTube/Vimeo 等）、可编辑链接。
- 表格：插入表格、插入/删除行列、删除表格（浮动菜单）。
- 查找/替换：浮动面板，支持下一处/上一处、替换当前、批量替换。
- Slash 命令面板：通过 `Ctrl+/` 打开，快捷执行常用插入/格式化动作。
- 主题：亮色/暗色切换，自动记忆上次选择。

## 文件操作
- 打开文件：`Ctrl+O`
- 保存文件：`Ctrl+S`
- 另存为：`Ctrl+Shift+S`
- 支持格式与行为：
  - 打开时自动识别扩展名并转换为编辑器内容：`JSON`（结构）、`MD`（转换为 HTML）、`TXT`（按行转 `<br>`）。
  - 保存时根据当前文件格式输出内容：`JSON`（`getJSON()`）、`MD`（HTML 简转 Markdown）、`TXT`（纯文本）。
  - 拖拽本地图片到编辑器自动插入（支持多图）。

## 查找 / 替换
- 打开查找：`Ctrl+F`
- 打开替换：`Ctrl+H`（在查找面板基础上开启替换输入）
- 面板内键位：
  - 定位下一处：在“查找内容”输入框按 `Enter`
  - 定位上一处：在“查找内容”输入框按 `Shift+Enter`
  - 关闭面板：`Esc`
- 替换：
  - 替换当前：点击“替换”或在“替换为”输入后回车
  - 全部替换：点击“全部替换”

## 编辑与格式化
（由 Tiptap `StarterKit` 与扩展提供，工具栏均有对应按钮）
- 加粗：`Ctrl+B`
- 斜体：`Ctrl+I`
- 下划线：`Ctrl+U`
- 删除线：`Ctrl+Shift+X`
- 标题：H1/H2/H3（工具栏与 Slash 命令支持）
- 引用：切换引用块
- 代码块：切换代码块
- 列表：无序列表、有序列表、任务列表（工具栏与 Slash 命令支持）
- 对齐：左对齐、居中、右对齐
- 分割线：插入水平分割线

## 颜色与字体
- 文字颜色：在颜色选择器中拖动即可对“当前选区”实时生效；支持“清除”恢复默认颜色。
- 高亮背景：选择高亮颜色；支持“清除背景”。
- 字体族：在“字体族”下拉框中选择或恢复“默认”。

## 链接与媒体
- 链接：选中文本后设置链接（可编辑、可取消，支持气泡菜单编辑）。
- 图片：
  - 本地图片：通过工具栏“插入本地图片”按钮选择文件。
  - URL 图片：通过工具栏“通过 URL 插入图片”（粘贴图标）输入地址，`Enter` 确认，`Esc` 取消。
  - 拖拽图片：将图片文件直接拖入编辑区域自动插入。
  - 可调大小：插入后可在图片控件上调整宽度（支持限制范围）。
- 视频：粘贴视频页面 URL（如 YouTube），会自动转换为可嵌入地址并插入。

## 表格操作（气泡菜单）
- 当光标位于表格单元格时，会显示表格气泡菜单：
  - 插入列（右侧）、插入行（下方）
  - 删除列、删除行
  - 删除表格
- 插入新表格：在工具栏点击“表格”后通过输入行数/列数并确认。

## 数学公式
- 行内公式：输入 LaTeX 后插入为行内公式。
- 块级公式：输入 LaTeX 后插入为块级公式（如不支持 block 节点，会以行内公式的“显示模式”兼容）。

## Slash 命令面板
- 打开/关闭：`Ctrl+/`
- 导航：`ArrowUp` / `ArrowDown`
- 应用命令：`Enter`
- 关闭：`Esc`
- 支持命令（示例）：
  - 标题：一级、二级、三级
  - 列表：无序、有序、任务
  - 引用、代码块、分割线
  - 表格：插入表格、删除表格
  - 文本格式：加粗、斜体、下划线、删除线
  - 对齐：左、居中、右
  - 链接、图片、视频、数学（行内/块级）

## 主题与外观
- 暗色/亮色切换：工具栏右侧按钮（太阳/月亮图标）。
- 主题记忆：会自动记住上次选择（`localStorage: ultratext-color-scheme`）。
- 文档与插入光标颜色：随主题自动适配，保证光标可见性与文本可读性。

## 快捷键总览
- 文件：`Ctrl+O`（打开）、`Ctrl+S`（保存）、`Ctrl+Shift+S`（另存为）
- 查找替换：`Ctrl+F`（查找）、`Ctrl+H`（替换）
- Slash：`Ctrl+/`（打开/关闭）
- 编辑格式：`Ctrl+B`（加粗）、`Ctrl+I`（斜体）、`Ctrl+U`（下划线）、`Ctrl+Shift+X`（删除线）
- 面板内辅助：`Enter`（下一处 / 应用）、`Shift+Enter`（上一处）、`Esc`（关闭）

—— 如需在应用内弹出“帮助 / 快捷键”界面，可后续在原生菜单中添加对应命令，或集成一个基于 Mantine 的 `HelpModal`（参考 `m7.6help.md`）。